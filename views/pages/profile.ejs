<%- include('../partials/header') %>

  <h1>Profile Page</h1>
  <hr class="mt-4 mb-4" />

  <div class="profileBox">
    <h2>
      <%= user.name %>
    </h2>

    <div class="profileImageBox">
      <img src="<%= user.avatar %>" class="userImage">
    </div>
    <div>
      <p>Threads Created: <%= user.threadsCreated %>
      </p>
      <p>Replies: <%= user.replies %>
      </p>
    </div>

    <div id="threads">
      <div class="container pt-5 pb-5">
        <h1>Threads</h1>
        <div>
          <hr class="mt-4 mb-4" />
          <div class="thread-container d-flex flex-column mb-4">

            <% threads.forEach(thread=> { %>

              <a href="/threads/thread-view?id=<%= thread._id %>">
                <h4>
                  <%= thread.title %>
                </h4>
              </a>

              <div class="thread-info d-flex flex-row justify-content-between">
                <div class="d-flex flex-row">
                  <img src='<%= thread.avatar %>' />
                  <div class="d-flex flex-column">
                    <h6>
                      <%= thread.author %>
                    </h6>
                    <h6>
                      <%= thread.createdAt %>
                    </h6>
                  </div>
                </div>

                <div class="thread-container-type d-flex flex-row">
                  <span class="thread-cohort">
                    <%= thread.cohort %>
                  </span>
                  <span class="thread-type">
                    <%= thread.threadType %>
                  </span>
                  <a href="/profile/threads-update?id=<%= thread._id %>">Edit</a>

                  <form action="/profile/<%= thread._id %>/deleteThread?_method=DELETE" method="POST">
                    <input type="hidden" name="id" value="<%= thread._id %>">
                    <input type="submit" value='delete' />
                  </form>
                </div>
              </div>
              <h5>
                <%= thread.briefDescription %>
              </h5>

              <% }); %>
          </div>
        </div>
      </div>
    </div>

    <%- include('../partials/footer') %>